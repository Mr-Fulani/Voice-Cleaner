# Ограничения удаления музыки без ML

## Важно понимать

**Полное удаление музыки без source separation (ML) физически невозможно**, если:
- Музыка перекрывает речь в том же частотном диапазоне (300-3400 Hz)
- Музыка играет одновременно с речью
- Музыка громче или на том же уровне, что и речь

## Что делает пресет `max_voice`

Пресет применяет **максимально агрессивные DSP фильтры**:

1. **Очень узкая полоса частот**: 200-4000 Hz (только речевой диапазон)
   - Убирает басы музыки (ниже 200 Hz)
   - Убирает высокие частоты музыки (выше 4000 Hz)

2. **Экстремальное подавление низких частот**:
   - 50 Hz: -15 dB (басы)
   - 100 Hz: -12 dB (низкие частоты)
   - 200 Hz: -8 dB (средние низкие)

3. **Максимальное усиление речи**:
   - 300 Hz: +12 dB (нижние речевые частоты)
   - 1000-3000 Hz: +10-12 dB (основной речевой диапазон)

4. **Тройной highpass фильтр**: 200 Hz, 230 Hz, 260 Hz
   - Максимально убирает остатки басов

5. **Spectral gate**: подавляет музыку в паузах речи

## Почему музыка всё равно слышна?

Если музыка **перекрывает речь в диапазоне 300-3400 Hz**, её нельзя убрать без source separation, потому что:

- **DSP фильтры** работают по частотам, а не по источникам звука
- Если музыка и речь в одном частотном диапазоне, фильтр не может их разделить
- Усиление речевых частот **усиливает и музыку** в том же диапазоне

## Что можно сделать?

### Вариант 1: Использовать ML source separation
- Spleeter, LALAL.AI, Demucs и т.д.
- Требует ML-модели (запрещено по требованиям проекта)

### Вариант 2: Если музыка только в паузах
- Текущий пресет `max_voice` уже использует spectral gate
- Это помогает убрать музыку, когда речь не звучит

### Вариант 3: Если музыка тише речи
- Агрессивная компрессия (ratio=8) помогает
- Но если музыка громкая, она всё равно будет слышна

### Вариант 4: Ручная обработка
- Использовать ML инструменты отдельно
- Затем применить Voice Cleaner к результату

## Рекомендации

1. **Попробуйте пресет `max_voice`** - он максимально агрессивен
2. **Проверьте результат** - возможно, музыка стала тише, но не полностью убрана
3. **Если нужна полная очистка** - используйте ML source separation (Spleeter, LALAL.AI)
4. **Комбинированный подход**: сначала ML для удаления музыки, потом Voice Cleaner для улучшения речи

## Технические детали

Текущий пресет `max_voice` использует:
- 10 фильтров в цепочке
- Полоса частот: 200-4000 Hz (узкая)
- Подавление низких: до -15 dB
- Усиление речи: до +12 dB
- Компрессия: ratio=8, threshold=-12dB

Это **максимум возможного** без ML.
